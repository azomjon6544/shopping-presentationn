<!DOCTYPE html>
<html lang="uz">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>TrendBazaar</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#0f1724; --card:#0b1220; --accent:#6c63ff; --accent-2:#3ddc97;
    --muted:#94a3b8; --white:#f8fafc;
  }
  *{box-sizing:border-box}
  body{
    margin:0; font-family:Inter,system-ui,Segoe UI,Roboto,Arial; background:linear-gradient(180deg,#081022 0%, #071029 60%); color:var(--white);
    -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
  }

  /* Header */
  .topbar{
    display:flex; align-items:center; justify-content:space-between;
    gap:12px; padding:18px 28px; background:linear-gradient(90deg, rgba(108,99,255,0.12), rgba(61,220,151,0.04));
    backdrop-filter: blur(6px);
  }
  .brand{display:flex; gap:12px; align-items:center; cursor:default}
  .logo{
    width:48px; height:48px; border-radius:10px; display:grid; place-items:center;
    font-weight:700; color:white; background:linear-gradient(135deg,var(--accent), #4b3fc9);
    box-shadow: 0 6px 24px rgba(108,99,255,0.18);
  }
  .brand h1{font-size:18px;margin:0}
  .searchbar{flex:1; max-width:760px; margin:0 18px; display:flex; gap:8px; align-items:center}
  .searchbar input{
    width:100%; padding:12px 14px; border-radius:10px; border:1px solid rgba(255,255,255,0.06);
    background: rgba(255,255,255,0.03); color:var(--white);
    outline:none; font-size:14px;
  }
  .controls{display:flex; gap:10px; align-items:center}
  .btn{padding:9px 12px; border-radius:10px; border:0; cursor:pointer; font-weight:600}
  .btn-ghost{background:transparent; color:var(--white); border:1px solid rgba(255,255,255,0.04)}
  .btn-primary{background:var(--accent); color:white; box-shadow:0 8px 30px rgba(108,99,255,0.12)}
  .cart-btn{position:relative}
  .badge{position:absolute; right:-6px; top:-6px; background:#ff4d6d; color:white; width:20px; height:20px; font-size:12px; border-radius:999px; display:grid; place-items:center; font-weight:700}

  /* Main layout */
  .wrap{max-width:1200px; margin:28px auto; padding:0 20px}
  .actions{display:flex; justify-content:space-between; align-items:center; gap:12px; margin-bottom:18px}
  .categories{display:flex; gap:10px; flex-wrap:wrap}
  .chip{padding:8px 12px; background:rgba(255,255,255,0.03); border-radius:999px; cursor:pointer; font-weight:600; color:var(--muted)}
  .chip.active{background:linear-gradient(90deg,var(--accent), #4b3fc9); color:white; box-shadow:0 8px 30px rgba(108,99,255,0.12)}

  /* Products grid */
  .grid{display:grid; grid-template-columns:repeat(auto-fill,minmax(220px,1fr)); gap:18px}
  .card{
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border-radius:12px; padding:14px; transition:transform .18s ease, box-shadow .18s; border:1px solid rgba(255,255,255,0.03);
  }
  .card:hover{transform:translateY(-8px); box-shadow:0 18px 40px rgba(2,6,23,0.6)}
  .thumb{width:100%; height:150px; border-radius:10px; overflow:hidden; display:flex; align-items:center; justify-content:center; background:linear-gradient(135deg,#0b1220,#081026)}
  .thumb img{width:100%; height:100%; object-fit:cover}
  .title{margin:10px 0 6px; font-weight:700; font-size:15px}
  .price{color:var(--accent-2); font-weight:700; margin-bottom:8px}
  .card .card-actions{display:flex; gap:8px; justify-content:space-between; align-items:center}
  .qty-controls{display:flex; gap:6px; align-items:center; color:var(--muted)}
  .small{font-size:13px; color:var(--muted)}

  /* Footer */
  footer{margin-top:40px; background:linear-gradient(180deg,#071022, #05101a); padding:36px 22px; border-top:1px solid rgba(255,255,255,0.02)}
  .footer-grid{display:grid; grid-template-columns:repeat(auto-fit,minmax(200px,1fr)); gap:18px; max-width:1200px; margin:0 auto}
  .footer h4{margin:0 0 10px 0; color:#e6eef8}
  .footer a{display:block; color:var(--muted); text-decoration:none; margin:6px 0; font-size:14px}
  .footer a:hover{color:white}

  /* Cart modal */
  .modal-backdrop{position:fixed; inset:0; background:rgba(0,0,0,0.5); display:none; align-items:center; justify-content:center; z-index:1000}
  .modal{width:94%; max-width:720px; background:#061124; border-radius:12px; padding:18px; border:1px solid rgba(255,255,255,0.04)}
  .modal h3{margin:0 0 10px}
  .cart-list{max-height:320px; overflow:auto; margin-top:8px; display:flex; flex-direction:column; gap:8px}
  .cart-row{display:flex; gap:12px; align-items:center; padding:8px; border-radius:8px; background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent)}
  .cart-row .c-thumb{width:56px; height:56px; border-radius:8px; overflow:hidden}
  .cart-row .c-thumb img{width:100%; height:100%; object-fit:cover}
  .cart-row .c-info{flex:1}
  .cart-row .c-actions{display:flex; gap:8px; align-items:center}
  .ghost{background:transparent;border:1px solid rgba(255,255,255,0.04); padding:6px 8px; border-radius:8px; color:var(--white); cursor:pointer}

  /* Info panel */
  .info-panel{background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent); padding:16px; border-radius:12px; margin-top:18px; border:1px solid rgba(255,255,255,0.02)}
  .hidden{display:none}

  /* Responsive */
  @media (max-width:720px){
    .searchbar{display:none}
    .brand h1{font-size:16px}
    .thumb{height:140px}
  }
</style>
</head>
<body>

<!-- Topbar -->
<div class="topbar">
  <div class="brand">
    <div class="logo">TB</div>
    <div>
      <h1 style="margin:0">TrendBazaar</h1>
      <div style="font-size:12px;color:var(--muted)">Onlayn bozoringiz</div>
    </div>
  </div>

  <div class="searchbar" role="search">
    <input id="searchInput" placeholder="Mahsulotlarni izlash... (masalan: gadget, jacket)" oninput="onSearch()" />
  </div>

  <div class="controls">
    <div class="chip active" data-cat="all" onclick="selectCat('all')">Barchasi</div>
    <div class="chip" data-cat="electronics" onclick="selectCat('electronics')">Electronics</div>
    <div class="chip" data-cat="clothes" onclick="selectCat('clothes')">Clothes</div>
    <div class="chip" data-cat="furniture" onclick="selectCat('furniture')">Furniture</div>
    <div class="chip" data-cat="accessories" onclick="selectCat('accessories')">Accessories</div>

    <button class="btn btn-ghost" onclick="openInfo('help')">Help</button>
    <button class="btn btn-primary cart-btn" onclick="openCart()">
      ðŸ›’ Savat <span id="cartCount" class="badge hidden">0</span>
    </button>
  </div>
</div>

<!-- Main -->
<main class="wrap">
  <div class="actions">
    <div>
      <h2 id="pageTitle" style="margin:0">Barcha mahsulotlar</h2>
      <div class="small">Kategoriyalar va qidiruv orqali mahsulot toping</div>
    </div>
    <div class="small" id="resultsInfo" style="align-self:center; color:var(--muted)"></div>
  </div>

  <section id="productGrid" class="grid" aria-live="polite"></section>

  <!-- Info panel (footer links show content here) -->
  <section id="infoPanel" class="info-panel hidden"></section>
</main>

<!-- Footer -->
<footer>
  <div class="footer-grid footer">
    <div>
      <h4>About Us</h4>
      <a href="#" onclick="showInfo('company')">Company Info</a>
      <a href="#" onclick="showInfo('careers')">Careers</a>
      <a href="#" onclick="showInfo('news')">News</a>
    </div>
    <div>
      <h4>Help Center</h4>
      <a href="#" onclick="showInfo('customer')">Customer Service</a>
      <a href="#" onclick="showInfo('returns')">Returns</a>
      <a href="#" onclick="showInfo('faq')">FAQs</a>
    </div>
    <div>
      <h4>Contact</h4>
      <a href="#" onclick="showInfo('email')">Email: support@shopx.com</a>
      <a href="#" onclick="showInfo('phone')">Phone: +998 90 123 45 67</a>
      <a href="#" onclick="showInfo('location')">Location</a>
    </div>
    <div>
      <h4>Follow Us</h4>
      <a href="#" onclick="showInfo('facebook')">Facebook</a>
      <a href="#" onclick="showInfo('instagram')">Instagram</a>
      <a href="#" onclick="showInfo('telegram')">Telegram</a>
    </div>
  </div>
</footer>

<!-- Modal: Cart -->
<div id="cartModal" class="modal-backdrop" role="dialog" aria-modal="true">
  <div class="modal" role="document">
    <div style="display:flex; justify-content:space-between; align-items:center; gap:12px">
      <h3>Savatingiz</h3>
      <div>
        <button class="ghost" onclick="closeCart()">Yopish</button>
      </div>
    </div>

    <div id="cartList" class="cart-list" aria-live="polite"></div>

    <div style="display:flex; justify-content:space-between; align-items:center; margin-top:12px">
      <div style="color:var(--muted)">Jami:</div>
      <div style="font-weight:700; font-size:18px" id="cartTotal">$0</div>
    </div>

    <div style="display:flex; gap:8px; margin-top:14px; justify-content:flex-end">
      <button class="ghost" onclick="clearCart()">Savatni tozalash</button>
      <button class="btn btn-primary" onclick="checkout()">Checkout</button>
    </div>
  </div>
</div>

<!-- Info Modal (small) -->
<div id="infoModal" class="modal-backdrop" style="align-items:flex-end; padding:20px 16px;">
  <div class="modal" style="max-width:420px; width:100%">
    <div style="display:flex; justify-content:space-between; align-items:center">
      <h3 id="infoTitle">Ma'lumot</h3>
      <button class="ghost" onclick="closeInfoModal()">Yopish</button>
    </div>
    <div id="infoContent" style="margin-top:10px; color:var(--muted); font-size:14px"></div>
  </div>
</div>

<script>
/* ---------------------------
  Data: generate 50 products
----------------------------*/
const categories = ["electronics","clothes","furniture","accessories"];
const sample = {
  electronics: ["Smartphone","Laptop","Tablet","Smart TV","Camera","Speaker","Drone","Monitor","Keyboard","Mouse"],
  clothes: ["Jacket","T-Shirt","Jeans","Sneakers","Hoodie","Coat","Dress","Shorts","Sweater","Skirt"],
  furniture: ["Chair","Dining Table","Sofa","Bed","Bookshelf","Wardrobe","Cabinet","Coffee Table","Desk","TV Stand"],
  accessories: ["Watch","Headphones","Bag","Sunglasses","Wallet","Belt","Cap","Scarf","Bracelet","Phone Case"]
};

let products = [];
let id = 1;
for(let cat of categories){
  for(let i=0;i<12;i++){ // 12*4 = 48, then add 2 more later
    const name = sample[cat][i % sample[cat].length] + " " + (i+1);
    const price = Math.floor(Math.random()*450) + 15;
    products.push({id: id++, name, price, category:cat, img:`https://picsum.photos/seed/${encodeURIComponent(name)}/520/360`});
  }
}
// Add 2 more to make 50
products.push({id:id++, name:"Exclusive Bundle A", price:699, category:"electronics", img:`https://picsum.photos/seed/BundleA/520/360`});
products.push({id:id++, name:"Exclusive Bundle B", price:499, category:"accessories", img:`https://picsum.photos/seed/BundleB/520/360`});

/* ---------------------------
  State: cart
----------------------------*/
let cart = []; // {id, name, price, qty, img}
const productGrid = document.getElementById('productGrid');
const pageTitle = document.getElementById('pageTitle');
const resultsInfo = document.getElementById('resultsInfo');
const cartCount = document.getElementById('cartCount');
const cartModal = document.getElementById('cartModal');
const cartList = document.getElementById('cartList');
const cartTotal = document.getElementById('cartTotal');
const searchInput = document.getElementById('searchInput');
const infoPanel = document.getElementById('infoPanel');

/* ---------------------------
  Render products
----------------------------*/
let currentCategory = 'all';
let currentSearch = '';

function renderProducts(list){
  productGrid.innerHTML = '';
  resultsInfo.textContent = `${list.length} ta topildi`;
  list.forEach(p => {
    const card = document.createElement('article');
    card.className = 'card';
    card.innerHTML = `
      <div class="thumb"><img src="${p.img}" alt="${escapeHtml(p.name)}" loading="lazy"></div>
      <div class="title">${escapeHtml(p.name)}</div>
      <div class="price">$${p.price}</div>
      <div class="card-actions">
        <div class="small">Kategoriya: <strong style="color:var(--muted)">${p.category}</strong></div>
        <div style="display:flex; gap:8px; align-items:center">
          <button class="btn btn-ghost" onclick="openQuick(${p.id})">Quick view</button>
          <button class="btn btn-primary" onclick="addToCart(${p.id})">Add to Cart</button>
        </div>
      </div>
    `;
    productGrid.appendChild(card);
  });
}

/* ---------------------------
  Filters and search
----------------------------*/
function selectCat(cat){
  currentCategory = cat;
  document.querySelectorAll('.chip').forEach(ch => ch.classList.toggle('active', ch.dataset.cat === cat));
  hideInfo();
  applyFilters();
}

function onSearch(){
  currentSearch = searchInput.value.trim().toLowerCase();
  applyFilters();
}

function applyFilters(){
  let filtered = products.filter(p => {
    const matchCat = (currentCategory === 'all') || p.category === currentCategory;
    const matchSearch = !currentSearch || p.name.toLowerCase().includes(currentSearch);
    return matchCat && matchSearch;
  });
  pageTitle.textContent = currentCategory === 'all' ? 'Barcha mahsulotlar' : currentCategory.charAt(0).toUpperCase()+currentCategory.slice(1);
  renderProducts(filtered);
}

/* ---------------------------
  Cart functions
----------------------------*/
function addToCart(pid){
  const p = products.find(x => x.id === pid);
  if(!p) return;
  const existing = cart.find(c => c.id === pid);
  if(existing){
    existing.qty++;
  } else {
    cart.push({id:p.id, name:p.name, price:p.price, qty:1, img:p.img});
  }
  updateCartUI();
  toast(`${p.name} savatga qo'shildi`);
}

function updateCartUI(){
  // update badge
  const totalQty = cart.reduce((s,c)=>s+c.qty,0);
  if(totalQty>0){
    cartCount.classList.remove('hidden'); cartCount.textContent = totalQty;
  } else cartCount.classList.add('hidden');

  // if modal open, re-render list
  if(cartModal.style.display === 'flex'){
    renderCartModal();
  }
}

function renderCartModal(){
  cartList.innerHTML = '';
  if(cart.length===0){
    cartList.innerHTML = `<div style="color:var(--muted); padding:12px">Savat bo'sh</div>`;
    cartTotal.textContent = '$0';
    return;
  }
  let sum = 0;
  cart.forEach((c, idx) => {
    sum += c.price * c.qty;
    const row = document.createElement('div');
    row.className = 'cart-row';
    row.innerHTML = `
      <div class="c-thumb"><img src="${c.img}" alt="${escapeHtml(c.name)}"></div>
      <div class="c-info">
        <div style="font-weight:700">${escapeHtml(c.name)}</div>
        <div class="small">$${c.price} Ã— ${c.qty} = $${(c.price*c.qty)}</div>
      </div>
      <div class="c-actions">
        <button class="ghost" onclick="changeQty(${idx}, -1)">âˆ’</button>
        <div style="min-width:28px; text-align:center">${c.qty}</div>
        <button class="ghost" onclick="changeQty(${idx}, 1)">ï¼‹</button>
        <button class="ghost" style="background:#ff4d6d; color:white; border:0; padding:8px 10px; border-radius:8px" onclick="removeCartItem(${idx})">Remove</button>
      </div>
    `;
    cartList.appendChild(row);
  });
  cartTotal.textContent = `$${sum.toFixed(2)}`;
}

function changeQty(index, delta){
  if(!cart[index]) return;
  cart[index].qty += delta;
  if(cart[index].qty <= 0) cart.splice(index,1);
  updateCartUI();
  renderCartModal();
}

function removeCartItem(index){
  if(!cart[index]) return;
  cart.splice(index,1);
  updateCartUI();
  renderCartModal();
}

function clearCart(){
  cart = [];
  updateCartUI();
  renderCartModal();
  toast('Savat tozalandi');
}

function checkout(){
  if(cart.length===0){ alert('Savat bo\'sh!'); return; }
  // In real app here you would call payment API / order creation
  const totalAmount = cart.reduce((s,c)=>s + c.price*c.qty, 0);
  alert(`Buyurtmangiz qabul qilindi! Jami: $${totalAmount.toFixed(2)}. Rahmat!`);
  cart = [];
  updateCartUI();
  closeCart();
}

/* ---------------------------
  Modal controls
----------------------------*/
function openCart(){
  cartModal.style.display = 'flex';
  renderCartModal();
}
function closeCart(){
  cartModal.style.display = 'none';
}

/* ---------------------------
  Quick view + toast
----------------------------*/
function openQuick(id){
  const p = products.find(x=>x.id===id);
  if(!p) return;
  showInfoModal(p.name, `<img src="${p.img}" alt="${escapeHtml(p.name)}" style="width:100%;border-radius:8px;margin-bottom:8px"/><p><strong>Price:</strong> $${p.price}</p><p class="small">Kategoriya: ${p.category}</p><div style="margin-top:8px"><button class="btn btn-primary" onclick="addToCart(${p.id}); closeInfoModal();">Kartaga qo'shish</button></div>`);
}

/* ---------------------------
  Info panel / footer links
----------------------------*/
const infoPanelEl = document.getElementById('infoPanel');

function showInfo(key){
  hideInfo(); // hide product list, show content in panel
  const map = {
    company: `<h3>Company Info</h3><p class="small">TrendBazaar â€” mintaqadagi ishonchli onlayn bozor. Biz mijozlarga sifatli mahsulot va tez yetkazib berishni ta'minlaymiz.</p>`,
    careers: `<h3>Careers</h3><p class="small">Ishga qabul: biz doim xodimlarni qidirmoqdamiz. CV yuborish: hr@TrendBazaar.example</p>`,
    news: `<h3>News</h3><p class="small">So'nggi yangiliklar: yangi filiallar, chegirmalar va kampaniyalar haqida xabardor bo'ling.</p>`,
    customer: `<h3>Customer Service</h3><p class="small">Mijozlarga yordam: support@shopx.com yoki +998 90 123 45 67 (09:00 - 18:00)</p>`,
    returns: `<h3>Returns</h3><p class="small">Mahsulotlarni 14 kun ichida qaytarish mumkin. Shartlar va tartib bo'yicha ma'lumotlarni bilish uchun bizga murojaat qiling.</p>`,
    faq: `<h3>FAQs</h3><p class="small">Tez-tez beriladigan savollar: yetkazib berish, to'lov, qaytarish, kafolat va boshqalar.</p>`,
    email: `<h3>Email</h3><p class="small">support@shopx.com</p>`,
    phone: `<h3>Phone</h3><p class="small">+998 90 123 45 67</p>`,
    location: `<h3>Location</h3><p class="small">Tashkent, Uzbekistan</p>`,
    facebook: `<h3>Facebook</h3><p class="small">Bizni Facebookda kuzatib boring: <a href="#" style="color:var(--accent)">facebook.com/TrendBazaar</a></p>`,
    instagram: `<h3>Instagram</h3><p class="small">Instagram: <a href="#" style="color:var(--accent)">@TrendBazaar</a></p>`,
    telegram: `<h3>Telegram</h3><p class="small">Telegram kanal: <a href="#" style="color:var(--accent)">t.me/TrendBazaar</a></p>`
  };
  infoPanelEl.innerHTML = map[key] || `<h3>Ma'lumot</h3><p class="small">Bu bo'lim hozircha mavjud emas.</p>`;
  infoPanelEl.classList.remove('hidden');
  // clear product grid so user focuses on info
  productGrid.innerHTML = '';
  pageTitle.textContent = 'Ma\'lumot';
  resultsInfo.textContent = '';
}

function hideInfo(){
  infoPanelEl.classList.add('hidden');
  // if no search or filter, show all products
  applyFilters();
}

/* ---------------------------
  Small UI helpers
----------------------------*/
function escapeHtml(unsafe) {
  return unsafe
       .replaceAll('&', "&amp;")
       .replaceAll('<', "&lt;")
       .replaceAll('>', "&gt;")
       .replaceAll('"', "&quot;")
       .replaceAll("'", "&#039;");
}

function toast(msg){
  const el = document.createElement('div');
  el.textContent = msg;
  el.style.position = 'fixed';
  el.style.right = '20px';
  el.style.bottom = '20px';
  el.style.padding = '10px 14px';
  el.style.background = 'linear-gradient(90deg,var(--accent), #4b3fc9)';
  el.style.color = 'white';
  el.style.borderRadius = '10px';
  el.style.boxShadow = '0 10px 30px rgba(2,6,23,0.6)';
  el.style.zIndex = 1200;
  document.body.appendChild(el);
  setTimeout(()=> el.style.opacity = '0', 2000);
  setTimeout(()=> el.remove(), 2600);
}

/* ---------------------------
  Info modal for quick view
----------------------------*/
const infoModal = document.getElementById('infoModal');
function showInfoModal(title, html){
  document.getElementById('infoTitle').textContent = title;
  document.getElementById('infoContent').innerHTML = html;
  infoModal.style.display = 'flex';
}
function closeInfoModal(){ infoModal.style.display = 'none'; }

/* ---------------------------
  Initialize UI
----------------------------*/
applyFilters(); // show all

// hide modals on backdrop click
document.getElementById('cartModal').addEventListener('click', (e)=>{
  if(e.target === cartModal) closeCart();
});
document.getElementById('infoModal').addEventListener('click', (e)=>{
  if(e.target === infoModal) closeInfoModal();
});
</script>
</body>
</html>
